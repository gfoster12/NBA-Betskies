Metadata-Version: 2.4
Name: parlaylab-nba
Version: 0.1.0
Summary: ParlayLab NBA: ML-driven parlay recommendation and marketing platform
Author: ParlayLab
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: pydantic>=2.6
Requires-Dist: pydantic-settings>=2.1
Requires-Dist: httpx>=0.25
Requires-Dist: pandas>=2.1
Requires-Dist: numpy>=1.26
Requires-Dist: SQLAlchemy>=2.0
Requires-Dist: alembic>=1.13
Requires-Dist: scikit-learn>=1.5
Requires-Dist: torch>=2.2
Requires-Dist: streamlit>=1.39
Requires-Dist: openai>=1.12
Requires-Dist: python-dotenv>=1.0
Requires-Dist: matplotlib>=3.8
Requires-Dist: plotly>=5.18
Requires-Dist: schedule>=1.2
Requires-Dist: tabulate>=0.9
Requires-Dist: email-validator>=2.1
Requires-Dist: tenacity>=8.2
Provides-Extra: dev
Requires-Dist: pytest>=7.4; extra == "dev"
Requires-Dist: pytest-mock>=3.12; extra == "dev"
Requires-Dist: coverage>=7.3; extra == "dev"
Requires-Dist: ruff>=0.4; extra == "dev"

# ParlayLab NBA

ParlayLab NBA is a full-stack sports analytics platform that ingests BALLDONTLIE GOAT data, trains probabilistic models, constructs +EV parlays, and distributes daily picks via Streamlit dashboards, notifications, and marketing content powered by GPT-5.1.

> **Responsible gaming:** This is an analytics tool for educational/entertainment use. Wager only what you can afford to lose and follow local laws (18+).

## Features
- Automated ingestion of teams/games/odds with rolling feature engineering stored in SQLite (swap-ready for Postgres).
- Hybrid ML stack (PyTorch tabular MLP + scikit-learn utilities) with daily retraining hooks, metrics logging, and artifact persistence.
- Parlay engine with correlation filters, EV + fractional Kelly bankroll sizing, and flagship/alternative outputs.
- Streamlit dashboard surfacing daily picks, historical performance, interactive parlay builder, subscriber management, and IG marketing agent.
- Notification layer with SMTP email + pluggable SMS stub plus documented cron-style scheduler.
- OpenAI Chat Completions integration for explanations and Instagram content (responsible gambling reminders included).
- Tests, docs, GitHub Actions CI, and typed config.

## Quickstart
1. **Python env**
   ```bash
   python3.11 -m venv .venv && source .venv/bin/activate
   pip install -U pip
   pip install -e .[dev]
   ```
2. **Environment variables** – copy `.env.example` to `.env` and fill in:
   - `BALLDONTLIE_API_KEY` *(GOAT subscription; never commit this value)*
   - `OPENAI_API_KEY`
   - `OPENAI_MODEL` (default `gpt-5.1-pro`)
   - SMTP settings (`EMAIL_*`), `ADMIN_PASSWORD`, `DATABASE_URL`, etc.
3. **Initialize DB**
   ```bash
   python -c "from parlaylab.db.models import Base; from parlaylab.db.database import engine; Base.metadata.create_all(engine)"
   ```
4. **Ingest data**
   ```bash
   python -c "from datetime import date; from parlaylab.data.ingestion import sync_historical_data, sync_daily; sync_historical_data(2022, 2023); sync_daily(date.today())"
   ```
5. **Train models**
   ```bash
   python -m parlaylab.models.training --task game_outcome --epochs 30
   ```
6. **Run Streamlit app**
   ```bash
   streamlit run app/streamlit_app.py
   ```
7. **Daily job (scheduler/cron)**
   ```bash
   python -m parlaylab.scheduling.jobs
   ```
   (Documented in `DEPLOYMENT.md` for cron usage.)

## Tests & Quality
```bash
pytest
ruff check .
```

GitHub Actions workflow (`.github/workflows/tests.yml`) installs dependencies and runs the same pytest suite.

## Docs
- `docs/ARCHITECTURE.md` – module/data-flow overview.
- `docs/ML_PIPELINE.md` – feature sets, training loop, and evaluation methodology.
- `docs/DEPLOYMENT.md` – Streamlit Cloud setup, scheduling strategy, and env requirements.

## Configuration summary
Settings live in `parlaylab/config.py` (Pydantic). Key knobs:
- `EDGE_THRESHOLD`, `KELLY_FRACTION`, `DEFAULT_BANKROLL`, `SCHEDULER_RUN_HOUR`.
- Notification mode + SMTP credentials.
- Database URL (SQLite default, Postgres-ready).

Refer to the docs for extensibility ideas such as richer correlation modeling, additional prop markets, or production notification providers (Twilio, SES, etc.).
